<html>
<head>

    <!--<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>-->
	
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/ladda-bootstrap/0.9.4/ladda-themeless.min.css">
	
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ladda-bootstrap/0.9.4/spin.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ladda-bootstrap/0.9.4/ladda.min.js"></script>

	
	<script type="text/javascript">
	var sprout = require('sprout');
	function capture() {
		     $("#progress").show();
			 $("#result img").hide();
			//clearResult();
			//lc.start();
			sprout.capture().then(function(id){
				return sprout.getPicture(id, sprout.SNAPSHOT);
			}).then(function(object){
				var image = document.createElement("img");
				image.src = "data:image/png;base64," + object.picture.Image;
				image.width = 1024;
				image.height = 720;
				//var result = document.getElementById("result");
				//result.html(image);
				$("#progress").hide();
				var result2 = opener.window.document.getElementById("result2");
				$(result2).html(image);
				opener.window.selectView("#capture-selector", "#capture-view");
			}).then(function() {
			//	 lc.stop();
			//	 showImage();
			}).fail(function(e){
				//lc.stop();
				//showError(e);
			});
		}

	</script>	
	
	<script type="text/javascript">
	$(function(){
		$("#progress").hide();
		var capturing = false;
		
		$('#result img').click( function (e) {
			if (!capturing) {
				capturing = true;
				capture();
				setTimeOut(function() {capturing = false;$("#progress").hide();$("#result img").show();}, 5000);
			}
								
		})
		
		function defSelector (name) {
			$("#" + name + "-selector").click(function(e) {
				//opener.window.selectView("#" + name + "-selector", "#" + name + "-view");
				opener.window.document.getElementById(name + "-selector").click();
				// $("#model-selector").click
			})
		}
		
		defSelector("capture");
		defSelector("inflamed");
		defSelector("model");
		
	})
	</script>

	<style>
	.capture {
		width :200px;
		height: 200px;
	}
	
	#result {
		margin-left:30%;
		margin-top: 15%;
	}
	
	ul.selectors {
		display: block;
		margin; padding: 0;
		list-style: none;
		position: fixed;
		bottom: 3em;
		left: 3em;
	}
	ul.selectors li {
		float: left; clear: left; width: 100%%; margin 1px;
	}
	
	ul.selectors li img {
		width: 20%;
	}
	</style>
	
		
</head>
<body>
	<div class="capture" style="width: 100%; height: 100%;">
	
		<div id="progress" class="progress">
			<div class="progress-bar progress-bar-warning progress-bar-striped active" 
				 role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="margin-left: 20%; width: 60%">
				<span class="sr-only">60% Complete (warning)</span>
			</div>
		</div>
	
		<div id="result"><img src="http://content.mycutegraphics.com/graphics/health/hand-outline.png" style="transform: scaleX(-1)"></div>

		<ul class="selectors">
			<li id="capture-selector">
			`	<img class="thumb" src="media/capture.png"><br>
			    <a href="#" >Capture Hand</a>
			</li>
			
			<li id="inflamed-selector">
			    <img class="thumb" src="media/image.png"><br>
				<a href="#" >Show Inflammation</a></li>
				
            <li id="model-selector">
				<img class="thumb" src="media/model.jpg"><br>
				<a href="#" >Inspect Model</a>
			</li>
		</ul>
				
	</div>
</body>
</html>